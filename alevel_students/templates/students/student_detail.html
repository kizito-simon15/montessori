<!-- templates/students_alevel/student_detail.html -->
{% extends "base.html" %}
{% load static %}
{% block title %}A-Level Student: {{ object.firstname }} {{ object.surname }}{% endblock %}
{% block breadcrumb %}
    <a href="{% url 'dashboard' %}">Home</a> > <a href="{% url 'students_alevel:alevel-student-list' %}">A-Level Students</a> > {{ object.firstname }} {{ object.surname }}
{% endblock %}
{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">A-Level Student Details: {{ object.firstname }} {{ object.surname }}</h3>
                <div class="card-tools">
                    <a href="{% url 'students_alevel:alevel-student-update' object.pk %}" class="btn btn-warning btn-sm">
                        <i class="fas fa-edit"></i> Edit
                    </a>
                    <a href="{% url 'students_alevel:alevel-student-delete' object.pk %}" class="btn btn-danger btn-sm delete-student" data-student="{{ object }}">
                        <i class="fas fa-trash"></i> Delete
                    </a>
                </div>
            </div>
            <div class="card-body student-details">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Registration Number:</strong> {{ object.registration_number }}</p>
                        <p><strong>First Name:</strong> {{ object.firstname }}</p>
                        <p><strong>Middle Name:</strong> {{ object.middle_name|default:"N/A" }}</p>
                        <p><strong>Surname:</strong> {{ object.surname }}</p>
                        <p><strong>Gender:</strong> {{ object.get_gender_display }}</p>
                        <p><strong>Date of Birth:</strong> {{ object.date_of_birth }}</p>
                        <p><strong>Current Class:</strong> {{ object.current_class|default:"N/A" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Date of Admission:</strong> {{ object.date_of_admission }}</p>
                        <p><strong>Father's Mobile Number:</strong> {{ object.father_mobile_number|default:"N/A" }}</p>
                        <p><strong>Mother's Mobile Number:</strong> {{ object.mother_mobile_number|default:"N/A" }}</p>
                        <p><strong>Address:</strong> {{ object.address|default:"N/A" }}</p>
                        <p><strong>Others:</strong> {{ object.others|default:"N/A" }}</p>
                        <p><strong>Current Status:</strong> {{ object.get_current_status_display }}</p>
                        {% if object.passport %}
                            <p><strong>Passport:</strong> <img src="{{ object.passport.url }}" alt="Student Passport"></p>
                        {% endif %}
                    </div>
                </div>

                <h4 class="mt-4">Payments</h4>
                {% if payments %}
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="bg-primary">
                                <tr>
                                    <th>Invoice ID</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for payment in payments %}
                                    <tr>
                                        <td>{{ payment.id }}</td>
                                        <td>{{ payment.amount }}</td>
                                        <td>{{ payment.date }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <p class="text-muted">No payments found.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<style>
    .student-details {
        font-family: Arial, sans-serif;
        line-height: 1.5;
    }
    .student-details p {
        margin: 10px 0;
    }
    .student-details img {
        display: block;
        margin-top: 10px;
        max-width: 200px;
        max-height: 200px;
        border-radius: 5px;
    }
    .btn:hover {
        transform: scale(1.05);
        transition: transform 0.2s ease;
    }
</style>
<script>
$(document).ready(function() {
    $('.delete-student').click(function(e) {
        e.preventDefault();
        if (confirm('Are you sure you want to delete ' + $(this).data('student') + '?')) {
            window.location = $(this).attr('href');
        }
    });
});
</script>
{% endblock %}

<!-- templates/students_alevel/completed_student_detail.html -->
{% extends "students_alevel/base.html" %}
{% load static %}
{% block title %}Completed A-Level Student: {{ object.firstname }} {{ object.surname }}{% endblock %}
{% block breadcrumb %}
    <a href="{% url 'dashboard' %}">Home</a> > <a href="{% url 'students_alevel:completed-alevel-students' %}">Completed A-Level Students</a> > {{ object.firstname }} {{ object.surname }}
{% endblock %}
{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Completed A-Level Student Details: {{ object.firstname }} {{ object.surname }}</h3>
            </div>
            <div class="card-body student-details">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Registration Number:</strong> {{ object.registration_number }}</p>
                        <p><strong>First Name:</strong> {{ object.firstname }}</p>
                        <p><strong>Middle Name:</strong> {{ object.middle_name|default:"N/A" }}</p>
                        <p><strong>Surname:</strong> {{ object.surname }}</p>
                        <p><strong>Gender:</strong> {{ object.get_gender_display }}</p>
                        <p><strong>Date of Birth:</strong> {{ object.date_of_birth }}</p>
                        <p><strong>Current Class:</strong> {{ object.current_class|default:"N/A" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Date of Admission:</strong> {{ object.date_of_admission }}</p>
                        <p><strong>Father's Mobile Number:</strong> {{ object.father_mobile_number|default:"N/A" }}</p>
                        <p><strong>Mother's Mobile Number:</strong> {{ object.mother_mobile_number|default:"N/A" }}</p>
                        <p><strong>Address:</strong> {{ object.address|default:"N/A" }}</p>
                        <p><strong>Others:</strong> {{ object.others|default:"N/A" }}</p>
                        <p><strong>Current Status:</strong> {{ object.get_current_status_display }}</p>
                        {% if object.passport %}
                            <p><strong>Passport:</strong> <img src="{{ object.passport.url }}" alt="Student Passport"></p>
                        {% endif %}
                    </div>
                </div>

                <h4 class="mt-4">Payments</h4>
                {% if payments %}
                    <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                            <thead class="bg-primary">
                                <tr>
                                    <th>Invoice ID</th>
                                    <th>Amount</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for payment in payments %}
                                    <tr>
                                        <td>{{ payment.id }}</td>
                                        <td>{{ payment.amount }}</td>
                                        <td>{{ payment.date }}</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <p class="text-muted">No payments found.</p>
                {% endif %}

                <h4 class="mt-4">Results</h4>
                {% if grouped_data %}
                    {% for session, terms in grouped_data.items %}
                        <h5>{{ session }}</h5>
                        {% for term, exams in terms.items %}
                            <h6>{{ term }}</h6>
                            {% for exam, data in exams.items %}
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <p><strong>Exam:</strong> {{ exam }}</p>
                                        <p><strong>Total Marks:</strong> {{ data.total }} / {{ data.total_marks }}</p>
                                        <p><strong>Average:</strong> {{ data.student_average|floatformat:2 }}</p>
                                        <p><strong>Position:</strong> {{ data.student_position }} / {{ data.total_students }}</p>
                                        {% if data.error %}
                                            <p class="text-danger">{{ data.error }}</p>
                                        {% endif %}
                                    </div>
                                </div>
                            {% endfor %}
                        {% endfor %}
                    {% endfor %}
                {% else %}
                    <p class="text-muted">No results found.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
<style>
    .student-details {
        font-family: Arial, sans-serif;
        line-height: 1.5;
    }
    .student-details p {
        margin: 10px 0;
    }
    .student-details img {
        display: block;
        margin-top: 10px;
        max-width: 200px;
        max-height: 200px;
        border-radius: 5px;
    }
</style>
{% endblock %}